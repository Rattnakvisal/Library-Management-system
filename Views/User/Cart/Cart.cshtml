@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Cart";
}

<div class="container">
    <div class="card cart-card p-4 mb-3">
        <div class="d-flex justify-content-between align-items-center">
            <h1 class="h2 fw-bold mb-0">Cart</h1>
            <div>
                <button class="btn btn-delete me-2">Delete</button>
                <button class="btn btn-request">Proceed to request</button>
            </div>
        </div>
    </div>

    <div class="inventory-group mb-4">
        <div class="d-flex align-items-center mb-3">
            <label class="checkbox-container me-3">
                <input type="checkbox" class="hidden-input master-tick"> <span class="custom-check"></span>
            </label>
            <h5 class="fw-bold text-secondary mb-0">Today</h5>
        </div>

        <div class="card cart-card p-4 mb-3">
            <div class="row align-items-center">
                <div class="col-auto">
                    <label class="checkbox-container">
                        <input type="checkbox" class="hidden-input">
                        <span class="custom-check"></span>
                    </label>
                </div>
                <div class="col-auto cart-img-width">
                    <img src="~/images/User/Book/general2.jpg" alt="Book Cover" class="book-img shadow-sm">
                </div>
                <div class="col">
                    <h4 class="fw-bold mb-1" style="color: #1e293b;">Financial Statement Analysis</h4>
                    <p class="text-muted small mb-0 mt-3">Author: Jame Bonds</p>
                    <p class="text-muted small mb-0">Publish Year: 2023</p>
                    <p class="text-muted small mb-0">Book Code: A168168</p>
                    <div class="star-rating text-warning small mt-3">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="card cart-card p-4 mb-3">
            <div class="row align-items-center">
                <div class="col-auto">
                    <label class="checkbox-container">
                        <input type="checkbox" class="hidden-input">
                        <span class="custom-check"></span>
                    </label>
                </div>
                <div class="col-auto cart-img-width">
                    <img src="~/images/User/Book/general2.jpg" alt="Book Cover" class="book-img shadow-sm">
                </div>
                <div class="col">
                    <h4 class="fw-bold mb-1" style="color: #1e293b;">Financial Statement Analysis</h4>
                    <p class="text-muted small mb-0 mt-3">Author: Jame Bonds</p>
                    <p class="text-muted small mb-0">Publish Year: 2023</p>
                    <p class="text-muted small mb-0">Book Code: A168168</p>
                    <div class="star-rating text-warning small mt-3">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="inventory-group mb-4">
        <div class="d-flex align-items-center mb-3">
            <label class="checkbox-container me-3">
                <input type="checkbox" class="hidden-input master-tick"> <span class="custom-check"></span>
            </label>
            <h5 class="fw-bold text-secondary mb-0">Yesterday</h5>
        </div>

        <div class="card cart-card p-4 mb-3"><div class="row align-items-center">
                <div class="col-auto">
                    <label class="checkbox-container">
                        <input type="checkbox" class="hidden-input">
                        <span class="custom-check"></span>
                    </label>
                </div>
                <div class="col-auto cart-img-width">
                    <img src="~/images/User/Book/general2.jpg" alt="Book Cover" class="book-img shadow-sm">
                </div>
                <div class="col">
                    <h4 class="fw-bold mb-1" style="color: #1e293b;">Financial Statement Analysis</h4>
                    <p class="text-muted small mb-0 mt-3">Author: Jame Bonds</p>
                    <p class="text-muted small mb-0">Publish Year: 2023</p>
                    <p class="text-muted small mb-0">Book Code: A168168</p>
                    <div class="star-rating text-warning small mt-3">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                    </div>
                </div>
            </div></div>
    </div>

    @* <div class="mb-2">
        <div class="d-flex align-items-center mb-3 me-2">
            <label class="checkbox-container me-3">
                <input type="checkbox" class="hidden-input mt-2" id="master-tick">
                <span class="custom-check"></span>
            </label>
            <h5 class="fw-bold text-secondary mb-3">Today</h5>
        </div>

        <div class="card cart-card p-4 mb-3">
            <div class="row align-items-center">
                <div class="col-auto">
                    <label class="checkbox-container">
                        <input type="checkbox" class="hidden-input">
                        <span class="custom-check"></span>
                    </label>
                </div>
                <div class="col-auto cart-img-width">
                    <img src="~/images/User/Book/general2.jpg" alt="Book Cover" class="book-img shadow-sm">
                </div>
                <div class="col">
                    <h4 class="fw-bold mb-1" style="color: #1e293b;">Financial Statement Analysis</h4>
                    <p class="text-muted small mb-0">Author: Jame Bonds</p>
                    <p class="text-muted small mb-0">Publish Year: 2023</p>
                    <p class="text-muted small mb-0">Book Code: A168168</p>
                    <div class="rating-stars mt-2">
                        ★★★★<span class="text-light">★</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card cart-card p-4 mb-3">
            <div class="row align-items-center">
                <div class="col-auto">
                    <label class="checkbox-container">
                        <input type="checkbox" class="hidden-input">
                        <span class="custom-check"></span>
                    </label>
                </div>
                <div class="col-auto">
                    <img src="~/images/User/Book/general.jpg" alt="Book Cover" class="book-img shadow-sm">
                </div>
                <div class="col">
                    <h4 class="fw-bold mb-1" style="color: #1e293b;">Financial Statement Analysis</h4>
                    <p class="text-muted small mb-0">Author: Jame Bonds</p>
                    <p class="text-muted small mb-0">Publish Year: 2023</p>
                    <p class="text-muted small mb-0">Book Code: A168168</p>
                    <div class="rating-stars mt-2">
                        ★★★★<span class="text-light">★</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div>
        <div class="d-flex align-items-center mb-3 me-2">
            <label class="checkbox-container me-3">
                <input type="checkbox" class="hidden-input mt-2" id="master-tick">
                <span class="custom-check"></span>
            </label>
            <h5 class="fw-bold text-secondary mb-3">Yesterday</h5>
        </div>

        <div class="card cart-card p-4 mb-3">
            <div class="row align-items-center">
                <div class="col-auto">
                    <label class="checkbox-container">
                        <input type="checkbox" class="hidden-input">
                        <span class="custom-check"></span>
                    </label>
                </div>
                <div class="col-auto cart-img-width">
                    <img src="~/images/User/Book/general2.jpg" alt="Book Cover" class="book-img shadow-sm">
                </div>
                <div class="col">
                    <h4 class="fw-bold mb-1" style="color: #1e293b;">Financial Statement Analysis</h4>
                    <p class="text-muted small mb-0">Author: Jame Bonds</p>
                    <p class="text-muted small mb-0">Publish Year: 2023</p>
                    <p class="text-muted small mb-0">Book Code: A168168</p>
                    
                    <div class="star-rating text-warning small mt-2">
                        <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
                    </div>
                </div>
            </div>
        </div>
    </div> *@
</div>

<script>

        $(document).ready(function () {
        $('.master-tick').on('change', function () {
            const $group = $(this).closest('.inventory-group');

            $group.find('.cart-card .hidden-input').prop('checked', this.checked);
        });

        $('.cart-card .hidden-input').on('change', function () {
            const $group = $(this).closest('.inventory-group');
            const $master = $group.find('.master-tick');
            const $allChildren = $group.find('.cart-card .hidden-input');

            const allChecked = $allChildren.length === $allChildren.filter(':checked').length;

            $master.prop('checked', allChecked);
        });
    });

    //     document.addEventListener('DOMContentLoaded', function () {
    //     const masterTicks = document.querySelectorAll('.master-tick');

    //     masterTicks.forEach(master => {
    //         master.addEventListener('change', function () {
    //             const group = this.closest('.inventory-group');
    //             const childTicks = group.querySelectorAll('.cart-card .hidden-input');

    //             childTicks.forEach(checkbox => {
    //                 checkbox.checked = this.checked;
    //             });
    //         });
    //     });

    //     const allChildTicks = document.querySelectorAll('.cart-card .hidden-input');
    //     allChildTicks.forEach(child => {
    //         child.addEventListener('change', function () {
    //             const group = this.closest('.inventory-group');
    //             const master = group.querySelector('.master-tick');
    //             const groupChildren = group.querySelectorAll('.cart-card .hidden-input');

    //             If any child is unchecked, master becomes unchecked
    //             if (!this.checked) {
    //                 master.checked = false;
    //             } else {
    //                 If every child in this group is checked, check the master
    //                 const allChecked = Array.from(groupChildren).every(c => c.checked);
    //                 master.checked = allChecked;
    //             }
    //         });
    //     });
    // });

</script>